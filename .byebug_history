continue
errors
err
err.user.valid?
err.user.valid
err.user.errors
err
continue
err.user.errors
err.errors.errors
err.errors
err
continue
User.find_by!(id: params[:user_id])
User.find(params[:user_id])
User.find!(params[:user_id])
params[:user_id]
params
continue
params
bonus_points
amount
next
current_user
params
q
params
 current_user
next
 current_user
next
params
next
params
continue
next
purchase
next
purchase
next
product_id
user_id
continue
next
 resource
next
step
continue
@current_user == @user
@current_user.admin?
continue
User.find(params&.symbolize_keys[:id]) || current_user
params&.symbolize_keys[:id]
params[:id]&.symbolize_keys
params[:id]&.symbolize_keys || current_user
params
continue
self
errors
:errors
continue
quantity
continue
purchase
next
continue
params
continue
params
continue
params
continue
params
continue
params
continue
params
continue
params
continue
next
continue
current_user
continue
valid?
continue
@amount
continue
next
continue
nil&.symbolize_keys || {}
nil&
nil&.symbolize_keys || {}
nil.symbolize_keys || {}
nil.symbolize_keys
resource_params&.symbolize_keys
resource_params.symbolize_keys&
resource_params.symbolize_keys
params
resource_params
continue
resource_params
params
continue
params
continue
self
@user
@current_user
continue
context
continue
context
parent_context
continue
context[:checkn]
context[:check]
context
continue
context:
context
q
next
q
purchases
next
purchase
next
purchase
q
continue
step
next
purchases
self.purchases
next
q
1
next
q
self.purchases
next
self.purchases
next
self.purchases
next
q
continue
purchase.price
next
continue
purchase.price
next
purchase.product.price
purchase
continue
self
continue
self
continue
self
self.class
continue
self.class
self
continue
self.class
self
errors
:errors
continue
:errors
errors
continue
self
next
password
user
next
q
next
model.class
model
continue
:errors
errors
next
q
self.class
self
continue
model.certificates_tokens[]
model.certificates_tokens
model
model.certificates_tokens
model.order
model[:certificates_tokens]
model.certificates_tokens
model
continue
model.class.super
model.super
model.class
model
continue
next
continue
next
continue
next
errors
next
step
next
continue
order.errors
order.valid?
next
order.valid?
next
continue
next
continue
order.errors
order.valid?
order.errors
next
q
order.errors
order.valid?
next
certificates_are_valid
continue
order.gift_certificates
order
order.certificate_tokens
order.certificates_tokens
order.errors
order.valid?
next
certificates_are_valid
continue
next
certificates_are_valid
continue
step
continue
resource_params
continue
resource_params
continue
resource_params
continue
resource_params
continue
resource_params
